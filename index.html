<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide: Upscaling Kling AI Video to 4K with Topaz Video AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Add this script to enable dark mode in Tailwind CSS via CDN
        tailwind.config = {
          darkMode: 'class',
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Sandstone & Teal -->
    <!-- Application Structure Plan: The SPA is structured as a step-by-step interactive guide, mirroring the recommended multi-phase upscaling workflow. A top-level stepper navigation guides the user from Source Prep (CapCut) -> Phase 1 (Refine/Interpolate) -> Phase 2 (1440p Upscale) -> Phase 3 (4K Upscale) -> Artifact Control -> Final Export. This task-oriented flow breaks down a complex technical process into manageable, understandable stages. It prioritizes user learning and clarity over simply presenting the report's text. Key interactions include model selection cards that reveal details on click and charts that visualize trade-offs, making the abstract concepts tangible. -->
    <!-- Visualization & Content Choices: The CapCut settings are presented as a clear checklist. The multi-phase workflow is shown with interactive flow diagrams (HTML/CSS) for each step. Goal: Clarify the process. Models (Proteus, Iris, etc.) are shown as interactive cards. Goal: Compare options. Interaction: Click to see details. Workflow strategy (Multi-Step vs. Single-Step) is visualized with a Donut Chart (Chart.js) showing the effort vs. quality trade-off. Goal: Compare quantitatively. Artifacts are organized in a grid. These choices make the guide interactive and visual without using SVG/Mermaid, adhering to constraints. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-item {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-item .nav-circle {
            transition: all 0.3s ease;
        }
        .nav-item.active .nav-circle {
            background-color: #0d9488; /* teal-600 */
            border-color: #0d9488; /* teal-600 */
            color: white;
        }
        html.dark .nav-item.active .nav-circle {
            background-color: #2dd4bf; /* teal-400 */
            border-color: #2dd4bf; /* teal-400 */
            color: #1f2937; /* gray-800 */
        }
        .nav-item.active .nav-text {
            color: #0d9488; /* teal-600 */
            font-weight: 600;
        }
        html.dark .nav-item.active .nav-text {
             color: #2dd4bf; /* teal-400 */
        }
        .nav-line {
            height: 2px;
            background-color: #d6d3d1; /* stone-300 */
            flex-grow: 1;
        }
        html.dark .nav-line {
             background-color: #44403c; /* stone-700 */
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 dark:bg-gray-900 dark:text-stone-200 transition-colors duration-300">

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <div class="absolute top-4 right-4">
            <button id="theme-toggle" type="button" class="flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-300 bg-gray-800 text-white hover:bg-gray-700 dark:bg-stone-200 dark:text-gray-800 dark:hover:bg-stone-300">
                <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                <span id="theme-toggle-text"></span>
            </button>
        </div>

        <header class="text-center mb-8 pt-16">
            <h1 class="text-4xl md:text-5xl font-bold text-stone-900 dark:text-stone-100">The 4K Upscaling Playbook</h1>
            <p class="mt-4 text-lg text-stone-600 dark:text-stone-400 max-w-3xl mx-auto">An interactive guide to transforming your Kling AI + CapCut video into pristine 4K/60fps footage using Topaz Video AI.</p>
        </header>

        <div class="mb-12 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-stone-200 dark:border-gray-700 max-w-3xl mx-auto overflow-hidden">
             <div class="md:flex md:gap-6 items-center">
                 <div class="md:w-1/2 flex-shrink-0">
                     <img src="youtube-banner.jpg" alt="YouTube Channel Banner for Callizto Dark Symphony" class="rounded-md object-cover w-full h-full">
                 </div>
                 <div class="md:w-1/2 mt-4 md:mt-0 text-center md:text-left">
                     <h3 class="text-xl font-bold text-stone-800 dark:text-stone-200">A Guide by Callizto Dark Symphony</h3>
                     <p class="text-stone-700 dark:text-stone-300 mt-2">See the final results of this upscaling workflow and other creative projects on the official YouTube channel.</p>
                     <a href="https://www.youtube.com/@CalliztoDarkSymphony" target="_blank" class="mt-4 inline-flex items-center gap-2 bg-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-red-700 transition-colors">
                        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.73,18.78 17.93,18.84C17.13,18.91 16.44,18.94 15.84,18.94L15,19C12.81,19 11.2,18.84 10.17,18.56C9.27,18.31 8.69,17.73 8.44,16.83C8.31,16.36 8.22,15.73 8.16,14.93C8.09,14.13 8.06,13.44 8.06,12.84L8,12C8,9.81 8.16,8.2 8.44,7.17C8.69,6.27 9.27,5.69 10.17,5.44C11.2,5.16 12.81,5 15,5L15.84,5.06C16.44,5.06 17.13,5.09 17.93,5.16C18.73,5.22 19.36,5.31 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z"></path></svg>
                        <span>Visit YouTube Channel</span>
                     </a>
                 </div>
             </div>
        </div>


        <nav id="stepper-nav" class="mb-12 flex items-center justify-center">
            <div class="flex items-center w-full max-w-5xl">
                <div id="nav-step-0" class="nav-item flex-1 text-center active" data-step="0">
                    <div class="nav-circle w-10 h-10 mx-auto bg-white dark:bg-gray-800 border-2 border-stone-300 dark:border-stone-600 rounded-full flex items-center justify-center text-lg font-semibold text-stone-500 dark:text-stone-400">1</div>
                    <p class="nav-text mt-2 text-sm md:text-base font-medium text-stone-500 dark:text-stone-400">CapCut Prep</p>
                </div>
                <div class="nav-line"></div>
                <div id="nav-step-1" class="nav-item flex-1 text-center" data-step="1">
                    <div class="nav-circle w-10 h-10 mx-auto bg-white dark:bg-gray-800 border-2 border-stone-300 dark:border-stone-600 rounded-full flex items-center justify-center text-lg font-semibold text-stone-500 dark:text-stone-400">2</div>
                    <p class="nav-text mt-2 text-sm md:text-base font-medium text-stone-500 dark:text-stone-400">Phase 1: Refine</p>
                </div>
                <div class="nav-line"></div>
                <div id="nav-step-2" class="nav-item flex-1 text-center" data-step="2">
                    <div class="nav-circle w-10 h-10 mx-auto bg-white dark:bg-gray-800 border-2 border-stone-300 dark:border-stone-600 rounded-full flex items-center justify-center text-lg font-semibold text-stone-500 dark:text-stone-400">3</div>
                    <p class="nav-text mt-2 text-sm md:text-base font-medium text-stone-500 dark:text-stone-400">Phase 2: Upscale</p>
                </div>
                <div class="nav-line"></div>
                <div id="nav-step-3" class="nav-item flex-1 text-center" data-step="3">
                    <div class="nav-circle w-10 h-10 mx-auto bg-white dark:bg-gray-800 border-2 border-stone-300 dark:border-stone-600 rounded-full flex items-center justify-center text-lg font-semibold text-stone-500 dark:text-stone-400">4</div>
                    <p class="nav-text mt-2 text-sm md:text-base font-medium text-stone-500 dark:text-stone-400">Phase 3: Final 4K</p>
                </div>
                <div class="nav-line"></div>
                 <div id="nav-step-4" class="nav-item flex-1 text-center" data-step="4">
                    <div class="nav-circle w-10 h-10 mx-auto bg-white dark:bg-gray-800 border-2 border-stone-300 dark:border-stone-600 rounded-full flex items-center justify-center text-lg font-semibold text-stone-500 dark:text-stone-400">5</div>
                    <p class="nav-text mt-2 text-sm md:text-base font-medium text-stone-500 dark:text-stone-400">Artifacts</p>
                </div>
                <div class="nav-line"></div>
                <div id="nav-step-5" class="nav-item flex-1 text-center" data-step="5">
                    <div class="nav-circle w-10 h-10 mx-auto bg-white dark:bg-gray-800 border-2 border-stone-300 dark:border-stone-600 rounded-full flex items-center justify-center text-lg font-semibold text-stone-500 dark:text-stone-400">6</div>
                    <p class="nav-text mt-2 text-sm md:text-base font-medium text-stone-500 dark:text-stone-400">Export</p>
                </div>
            </div>
        </nav>

        <main id="main-content">
            <!-- Content sections will be injected here by JavaScript -->
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            const nav = document.getElementById('stepper-nav');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeToggleText = document.getElementById('theme-toggle-text');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

            let activeStep = -1;
            let charts = {};
            
            function setTheme(isDark) {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                    themeToggleLightIcon.classList.remove('hidden');
                    themeToggleDarkIcon.classList.add('hidden');
                    themeToggleText.textContent = 'Light Mode';
                    localStorage.setItem('color-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    themeToggleDarkIcon.classList.remove('hidden');
                    themeToggleLightIcon.classList.add('hidden');
                    themeToggleText.textContent = 'Dark Mode';
                    localStorage.setItem('color-theme', 'light');
                }
                 renderAllCharts();
            }

            // Check for saved theme preference or system preference
            const isDarkModePreferred = localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            setTheme(isDarkModePreferred);
            
            const contentData = [
                {
                    title: 'Preparing Your Source: Optimal CapCut Export Settings',
                    description: 'The foundation of a high-quality upscale is a high-quality source file. Before you even open Topaz Video AI, your export settings in CapCut are the most critical factor. The goal is to create a high-bitrate "intermediate" file that preserves as much detail as possible, giving Topaz the best material to work with.',
                    html: `
                        <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg border border-stone-200 dark:border-gray-700 max-w-3xl mx-auto">
                            <h3 class="font-bold text-2xl mb-6 text-center text-stone-800 dark:text-stone-100">CapCut Export Checklist</h3>
                            <div class="space-y-5">
                                <div class="flex items-start space-x-4">
                                    <div class="text-teal-600 dark:text-teal-400 mt-1">✓</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">Resolution:</span> 1920x1080 (Match Source)</div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="text-teal-600 dark:text-teal-400 mt-1">✓</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">Bitrate:</span> Custom → Highest Possible (50,000 Kbps)</div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="text-teal-600 dark:text-teal-400 mt-1">✓</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">Codec:</span> HEVC (H.265)</div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="text-teal-600 dark:text-teal-400 mt-1">✓</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">Frame Rate:</span> Fixed frame rate (CFR) → 30 FPS (Match Source)</div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="text-teal-600 dark:text-teal-400 mt-1">✓</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">Color Space:</span> Keep Original (BT.709 for HD)</div>
                                </div>
                                 <div class="flex items-start space-x-4">
                                    <div class="text-red-600 mt-1">✗</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">AI Enhancements:</span> Turn OFF (e.g., Image enhancement, Reduce noise)</div>
                                </div>
                                <div class="flex items-start space-x-4">
                                    <div class="text-red-600 mt-1">✗</div>
                                    <div><span class="font-semibold text-stone-700 dark:text-stone-300">Optical Flow:</span> Turn OFF (for slow motion, etc.)</div>
                                </div>
                            </div>
                            <p class="text-center mt-8 text-sm text-stone-600 dark:text-stone-400 bg-amber-50 dark:bg-gray-700 p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-500">The guiding principle is to avoid heavy compression and unnecessary AI processing in CapCut. Let Topaz Video AI's specialized tools handle the heavy lifting of enhancement, upscaling, and frame rate conversion.</p>
                        </div>
                    `
                },
                {
                    title: 'Phase 1: Refine & Interpolate to 60fps',
                    description: 'The first step isn\'t upscaling. It\'s about gently refining the 1080p source and converting the frame rate from 30fps to a smooth 60fps. This separates the complex task of frame generation from upscaling, often yielding better motion quality.',
                    html: `
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                            <div class="flex flex-col md:flex-row items-center justify-around text-center p-4 mb-6">
                                <div class="p-4"><p class="font-semibold">INPUT</p><p class="text-sm text-stone-600 dark:text-stone-400">1080p @ 30fps</p></div>
                                <div class="text-4xl text-teal-600 dark:text-teal-400 mx-8 transform md:rotate-0 rotate-90 my-4 md:my-0">→</div>
                                <div class="p-4 border-2 border-teal-500 dark:border-teal-400 rounded-lg bg-teal-50 dark:bg-gray-700">
                                    <p class="font-semibold text-teal-800 dark:text-teal-300">PROCESS</p>
                                    <p class="text-sm text-teal-700 dark:text-teal-400">Proteus Refine + Apollo/Chronos Interpolate</p>
                                </div>
                                <div class="text-4xl text-teal-600 dark:text-teal-400 mx-8 transform md:rotate-0 rotate-90 my-4 md:my-0">→</div>
                                <div class="p-4"><p class="font-semibold">OUTPUT (Intermediate)</p><p class="text-sm text-stone-600 dark:text-stone-400">1080p @ 60fps</p></div>
                            </div>
                            <div class="grid md:grid-cols-2 gap-8 items-start">
                                <div>
                                    <h3 class="font-bold text-xl mb-4">Model Selection & Comparison</h3>
                                     <div>
                                        <h4 class="font-semibold text-lg">Enhancement: Proteus</h4>
                                        <p class="text-stone-600 dark:text-stone-400 text-sm mt-1 mb-6">Use Proteus for a very light touch-up. The goal is to prepare the footage for interpolation, not to drastically alter it. Use the 'Estimate' button, then make small adjustments to \`Recover Details\` and \`Sharpen\`.</p>
                                    </div>
                                    <div class="chart-container"><canvas id="interpolationChart"></canvas></div>
                                </div>
                                <div>
                                     <h3 class="font-bold text-xl mb-4">Frame Interpolation Deep Dive</h3>
                                     <p class="text-stone-600 dark:text-stone-400 text-sm mb-4">Choose a model to generate the new frames. Apollo is often better for complex, non-linear motion, while Chronos Fast is quicker. The chart shows the trade-off. Test both on a short clip with motion to see which looks best for your specific footage.</p>
                                     <div class="bg-amber-50 dark:bg-gray-700 border-l-4 border-amber-400 dark:border-amber-500 p-4 rounded-r-lg">
                                        <h4 class="font-semibold text-amber-900 dark:text-amber-300">Critical Step: Intermediate Export</h4>
                                        <p class="text-amber-800 dark:text-amber-400 text-sm mt-2">To prevent quality loss between phases, export this 1080p/60fps file as a high-quality image sequence (PNG or TIFF 16-bit) or a professional video codec like ProRes 422 HQ. This creates a large file but is essential for the best final result.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                {
                    title: 'Phase 2: Upscale to 1440p & Refine',
                    description: 'Now we begin the upscaling, but not all at once. A smaller jump to 1440p (2560x1440) is gentler on the AI models, reducing the risk of artifacts and allowing for targeted refinement at this new intermediate resolution.',
                     html: `
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                           <div class="flex flex-col md:flex-row items-center justify-around text-center p-4 mb-6">
                                <div class="p-4"><p class="font-semibold">INPUT</p><p class="text-sm text-stone-600 dark:text-stone-400">1080p @ 60fps</p></div>
                                <div class="text-4xl text-teal-600 dark:text-teal-400 mx-8 transform md:rotate-0 rotate-90 my-4 md:my-0">→</div>
                                <div class="p-4 border-2 border-teal-500 dark:border-teal-400 rounded-lg bg-teal-50 dark:bg-gray-700">
                                    <p class="font-semibold text-teal-800 dark:text-teal-300">PROCESS</p>
                                    <p class="text-sm text-teal-700 dark:text-teal-400">Proteus/Iris Upscale to 1.33x</p>
                                </div>
                                <div class="text-4xl text-teal-600 dark:text-teal-400 mx-8 transform md:rotate-0 rotate-90 my-4 md:my-0">→</div>
                                <div class="p-4"><p class="font-semibold">OUTPUT (Intermediate)</p><p class="text-sm text-stone-600 dark:text-stone-400">1440p @ 60fps</p></div>
                            </div>
                            <div class="grid md:grid-cols-2 gap-8 items-center">
                                <div>
                                    <h3 class="font-bold text-xl mb-4">Enhancement Model Choice</h3>
                                    <p class="text-stone-600 dark:text-stone-400 text-sm mb-4">At this stage, your choice is typically between Proteus for all-around enhancement, or Iris if your video has prominent faces that need special attention. The chart visualizes their strengths to help you decide.</p>
                                    <div class="bg-amber-50 dark:bg-gray-700 border-l-4 border-amber-400 dark:border-amber-500 p-4 rounded-r-lg mt-6">
                                        <h4 class="font-semibold text-amber-900 dark:text-amber-300">Pro Tip: Second Enhancement</h4>
                                        <p class="text-amber-800 dark:text-amber-400 text-sm mt-2">In preferences, enabling a "Second Enhancement" lets you use both models: Proteus for the main upscale and Iris for face touch-ups, offering powerful, nuanced control.</p>
                                    </div>
                                </div>
                                <div class="chart-container"><canvas id="phase2Chart"></canvas></div>
                            </div>
                        </div>
                    `
                },
                {
                    title: 'Phase 3: Final Upscale to 4K',
                    description: 'The last upscaling step takes our refined 1440p footage to the final 3840x2160 (4K) resolution. This 1.5x jump is the final polish, focusing on achieving ultimate clarity and a natural texture for the finished product.',
                    html: `
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                           <div class="flex flex-col md:flex-row items-center justify-around text-center p-4 mb-6">
                                <div class="p-4"><p class="font-semibold">INPUT</p><p class="text-sm text-stone-600 dark:text-stone-400">1440p @ 60fps</p></div>
                                <div class="text-4xl text-teal-600 dark:text-teal-400 mx-8 transform md:rotate-0 rotate-90 my-4 md:my-0">→</div>
                                <div class="p-4 border-2 border-teal-500 dark:border-teal-400 rounded-lg bg-teal-50 dark:bg-gray-700">
                                    <p class="font-semibold text-teal-800 dark:text-teal-300">PROCESS</p>
                                    <p class="text-sm text-teal-700 dark:text-teal-400">Proteus/Iris/Artemis Upscale to 1.5x</p>
                                </div>
                                <div class="text-4xl text-teal-600 dark:text-teal-400 mx-8 transform md:rotate-0 rotate-90 my-4 md:my-0">→</div>
                                <div class="p-4"><p class="font-semibold">OUTPUT (Final)</p><p class="text-sm text-stone-600 dark:text-stone-400">4K @ 60fps</p></div>
                            </div>
                            <div class="grid md:grid-cols-2 gap-8 items-center">
                                <div>
                                    <h3 class="font-bold text-xl mb-4">Final Polish: Model Characteristics</h3>
                                    <p class="text-stone-600 dark:text-stone-400 text-sm mb-4">For the final pass, you're balancing ultimate sharpness against a natural look. Proteus/Iris will give you fine-tuned control over sharpness, while Artemis provides a more balanced, clean result. Adding a tiny bit of noise can restore a filmic texture if the image looks too "digital."</p>
                                    <p class="text-stone-600 dark:text-stone-400 text-sm">The chart visualizes these different finishing styles to help guide your choice for the final export.</p>
                                </div>
                                <div class="chart-container"><canvas id="phase3Chart"></canvas></div>
                            </div>
                        </div>
                    `
                },
                {
                    title: 'Controlling Artifacts & Maintaining Naturalism',
                    description: 'The goal is a high-quality version of the AI-generated aesthetic, not perfect photorealism. This means enhancing the strengths of the Kling AI footage while mitigating its weaknesses. Here are common issues and how to manage them.',
                    html: `
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                                <h3 class="font-bold text-lg mb-2">"Plastic" or "Waxy" Skin</h3>
                                <p class="text-stone-600 dark:text-stone-400 text-sm">Caused by over-aggressive noise reduction or face enhancement. To fix, reduce those settings or use the \`Add Noise\` feature to restore subtle texture.</p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                                <h3 class="font-bold text-lg mb-2">"Oil Painting" Effect</h3>
                                <p class="text-stone-600 dark:text-stone-400 text-sm">Occurs with too much detail enhancement or sharpening. Reduce the intensity of \`Improve Detail\`, \`Recover Details\`, or \`Sharpen\` sliders.</p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                                <h3 class="font-bold text-lg mb-2">Motion Artifacts</h3>
                                <p class="text-stone-600 dark:text-stone-400 text-sm">Ghosting, warping, or flickering. Often inherent to the source or interpolation. Avoid excessive sharpening, which can highlight these frame-to-frame inconsistencies.</p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                                <h3 class="font-bold text-lg mb-2">Edge Halos</h3>
                                <p class="text-stone-600 dark:text-stone-400 text-sm">Bright or dark glows around object edges. Use the dedicated \`Dehalo\` parameter to address this directly. You may need to bump sharpness slightly to compensate.</p>
                            </div>
                        </div>
                         <div class="mt-8 grid md:grid-cols-2 gap-8 items-center">
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700">
                                <h3 class="font-bold text-xl mb-4">Single-Step vs. Multi-Step</h3>
                                <p class="text-stone-700 dark:text-stone-300 leading-relaxed mb-4">While a direct 1080p -> 4K upscale is faster, the recommended multi-step approach provides far more control, resulting in superior detail and fewer artifacts. The chart illustrates the trade-off between speed and potential quality.</p>
                                <p class="text-stone-700 dark:text-stone-300 font-semibold">The investment in time for a multi-step process pays dividends in the final quality.</p>
                            </div>
                            <div class="chart-container"><canvas id="strategyChart"></canvas></div>
                        </div>
                    `
                },
                {
                    title: 'Final Export: Delivering Your 4K Masterpiece',
                    description: 'The final step is exporting your fully processed 4K/60fps video. The right settings will preserve all the hard work, balancing quality with a manageable file size for delivery.',
                    html: `
                         <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg border border-stone-200 dark:border-gray-700 max-w-2xl mx-auto">
                            <h3 class="font-bold text-2xl mb-6 text-center text-stone-800 dark:text-stone-100">Final Export Settings</h3>
                            <div class="space-y-5">
                                <div class="flex justify-between items-center border-b pb-3 border-stone-200 dark:border-gray-700">
                                    <span class="font-semibold text-stone-700 dark:text-stone-300">Container</span>
                                    <span class="bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 font-mono px-3 py-1 rounded-md text-sm">MP4</span>
                                </div>
                                <div class="flex justify-between items-center border-b pb-3 border-stone-200 dark:border-gray-700">
                                    <span class="font-semibold text-stone-700 dark:text-stone-300">Video Codec</span>
                                    <span class="bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 font-mono px-3 py-1 rounded-md text-sm">H.265 (HEVC)</span>
                                </div>
                                <div class="flex justify-between items-center border-b pb-3 border-stone-200 dark:border-gray-700">
                                    <span class="font-semibold text-stone-700 dark:text-stone-300">Rate Control</span>
                                    <span class="bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 font-mono px-3 py-1 rounded-md text-sm">Dynamic (VBR) - High Quality</span>
                                </div>
                                <div class="flex justify-between items-center border-b pb-3 border-stone-200 dark:border-gray-700">
                                    <span class="font-semibold text-stone-700 dark:text-stone-300">Bitrate (if CBR)</span>
                                    <span class="bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 font-mono px-3 py-1 rounded-md text-sm">~40-65 Mbps</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="font-semibold text-stone-700 dark:text-stone-300">Audio Settings</span>
                                    <span class="bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 font-mono px-3 py-1 rounded-md text-sm">Copy</span>
                                </div>
                            </div>
                            <p class="text-center mt-8 text-sm text-stone-600 dark:text-stone-400">These settings provide the best balance of quality and file size for sharing or uploading your final 4K video. The 'Copy' audio setting is crucial as it prevents re-compressing the audio, preserving its original quality.</p>
                        </div>
                    `
                },
            ];

            function renderContent(step) {
                if(activeStep === step) return;
                activeStep = step;
                
                const content = contentData[step];
                if (!content) return;
                
                mainContent.innerHTML = `
                    <section class="fade-in">
                        <div class="text-center mb-8">
                            <h2 class="text-3xl font-bold text-stone-800 dark:text-stone-100">${content.title}</h2>
                            <p class="mt-3 text-stone-600 dark:text-stone-400 max-w-3xl mx-auto">${content.description}</p>
                        </div>
                        ${content.html}
                    </section>
                `;

                nav.querySelectorAll('.nav-item').forEach((item, index) => {
                    if (index === step) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
                
                renderAllCharts();
            }
            
            function updateChartColors() {
                const isDarkMode = document.documentElement.classList.contains('dark');
                Chart.defaults.color = isDarkMode ? '#e5e7eb' : '#57534e';
                Chart.defaults.borderColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            }
            
            function destroyCharts() {
                Object.values(charts).forEach(chart => {
                    if (chart) chart.destroy();
                });
                charts = {};
            }
            
            function renderAllCharts() {
                destroyCharts();
                updateChartColors();
                if (activeStep === 1) renderInterpolationChart();
                if (activeStep === 2) renderPhase2Chart();
                if (activeStep === 3) renderPhase3Chart();
                if (activeStep === 4) renderStrategyChart();
            }
            
            function renderInterpolationChart() {
                const ctx = document.getElementById('interpolationChart')?.getContext('2d');
                if (!ctx) return;
                charts.interpolation = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Apollo', 'Chronos Fast'],
                        datasets: [{
                            label: 'Relative Quality',
                            data: [95, 80],
                            backgroundColor: 'rgba(13, 148, 136, 0.6)',
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1
                        }, {
                            label: 'Relative Speed',
                            data: [50, 90],
                            backgroundColor: 'rgba(245, 158, 11, 0.6)',
                            borderColor: 'rgba(245, 158, 11, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true, max: 100, ticks: { callback: (value) => value + '%' }}},
                        plugins: { title: { display: true, text: 'Frame Interpolation Model Trade-offs', font: { size: 16 } }, tooltip: { mode: 'index', intersect: false } }
                    }
                });
            }

            function renderPhase2Chart() {
                const ctx = document.getElementById('phase2Chart')?.getContext('2d');
                if (!ctx) return;
                charts.phase2 = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['General Detail', 'Face Recovery', 'Artifact Control', 'Tunability', 'Speed'],
                        datasets: [
                            {
                                label: 'Proteus',
                                data: [9, 6, 8, 10, 8],
                                fill: true,
                                backgroundColor: 'rgba(13, 148, 136, 0.2)',
                                borderColor: 'rgb(13, 148, 136)',
                                pointBackgroundColor: 'rgb(13, 148, 136)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgb(13, 148, 136)'
                            },
                            {
                                label: 'Iris',
                                data: [7, 10, 7, 6, 7],
                                fill: true,
                                backgroundColor: 'rgba(245, 158, 11, 0.2)',
                                borderColor: 'rgb(245, 158, 11)',
                                pointBackgroundColor: 'rgb(245, 158, 11)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgb(245, 158, 11)'
                            }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true, max: 10,
                                grid: { color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },
                                pointLabels: { font: { size: 12 }, color: document.documentElement.classList.contains('dark') ? '#e5e7eb' : '#57534e' },
                                angleLines: { color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' }
                            }
                        },
                        plugins: { title: { display: true, text: '1440p Upscale: Proteus vs. Iris', font: { size: 16 } }, legend: { position: 'top' } }
                    }
                });
            }
            
            function renderPhase3Chart() {
                const ctx = document.getElementById('phase3Chart')?.getContext('2d');
                if (!ctx) return;
                charts.phase3 = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Proteus/Iris', 'Artemis HQ', 'Proteus + Add Noise'],
                        datasets: [{
                            label: 'Final Sharpness',
                            data: [9, 7, 8],
                            backgroundColor: 'rgba(13, 148, 136, 0.6)',
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1
                        }, {
                            label: 'Natural Texture',
                            data: [7, 9, 10],
                             backgroundColor: 'rgba(245, 158, 11, 0.6)',
                            borderColor: 'rgba(245, 158, 11, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true, max: 10 } },
                        plugins: { title: { display: true, text: '4K Polish: Sharpness vs. Texture', font: { size: 16 } }, tooltip: { mode: 'index', intersect: false } }
                    }
                });
            }

            function renderStrategyChart() {
                const ctx = document.getElementById('strategyChart')?.getContext('2d');
                if (!ctx) return;
                const isDarkMode = document.documentElement.classList.contains('dark');
                charts.strategy = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Multi-Step Effort (Time/Complexity)', 'Multi-Step Quality Gain'],
                        datasets: [{
                            data: [40, 60],
                            backgroundColor: ['rgba(245, 158, 11, 0.7)', 'rgba(13, 148, 136, 0.7)'],
                            borderColor: [isDarkMode ? '#111827' : '#f5f5f4'],
                            borderWidth: 4
                        }]
                    },
                     options: { responsive: true, maintainAspectRatio: false,
                        plugins: { title: { display: true, text: 'Effort vs. Quality: Multi-Step Workflow', font: { size: 16 } }, legend: { position: 'bottom' } }
                    }
                });
            }

            nav.addEventListener('click', (e) => {
                const navItem = e.target.closest('.nav-item');
                if (navItem) {
                    const stepIndex = parseInt(navItem.dataset.step);
                    renderContent(stepIndex);
                }
            });

            themeToggleBtn.addEventListener('click', () => {
                const isDark = document.documentElement.classList.contains('dark');
                setTheme(!isDark);
            });

            renderContent(0);
        });
    </script>

</body>
</html>
